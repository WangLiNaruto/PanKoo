# DIP `依赖倒置原则(Dependence Inversion Principle)`

    到底什么是“倒置”呢？我们先说“正置”是什么意思，依赖正置就是类间的依赖是实实在在的实现类间的依赖，也就是面向实现编程，这也是正常人的思维方式，
    而编写程序需要的是对现实世界的事物进行抽象，抽象的结果就是有了抽象类和接口，然后我们根据系统设计的需要产生了抽象间的依赖，代替了人们传统思维中的事物间的依赖，
    “倒置”就是从这里产生的

    High level modules should not depend upon low level modules.Both should depend upon
    abstractions.Abstractions should not depend upon details.Details should depend upon abstractions.
    翻译过来，包含三层含义：

* 高层模块不应该依赖低层模块,两者都应该依赖其抽象
* 抽象不应该依赖细节
* 细节应该依赖抽象
>高层模块和低层模块容易理解，每一个逻辑的实现都是由原子逻辑组成的，不可分割的原子逻辑就是低层模块，原子逻辑的再组装就是高层模块。
那什么是抽象？什么又是细节呢？在Java语言中，抽象就是指接口或抽象类，两者都是不能直接被实例化的； 细节就是实现类，实现接口或继承抽象类而产生的类就是细节，其特点就是可以直接被实例化，
也就是可以加上一个关键字new产生一个对象。依赖倒置原则在Java语言中的表现就是
* 模块间的依赖通过抽象发生，实现类之间不发生直接的依赖关系，其依赖关系是通过接口或抽象类产生的
* 接口或抽象类不依赖于实现类
* 实现类依赖接口或抽象类，更加精简的定义就是“面向接口编程”——OOD（Object-Oriented Design，面向对象设计）的精髓之一

## 优点
* 代码的扩展性和可维护性增加
* 减少因需求变化引起的工作量剧增的情况
* 依赖倒置原则是6个设计原则中最难以实现的原则，它是实现开闭原则的重要途径，依赖倒置原则没有实现，就别想实现对扩展开放，对修改关闭

## 依赖的三种写法

依赖是可以传递的，A对象依赖B对象，B又依赖C，C又依赖D……生生不息，依赖不止，记住一点：只要做到抽象依赖，即使是多层的依赖传递也无所畏惧：
* 构造函数传递依赖对象
>在类中通过构造函数声明依赖对象，按照依赖注入的说法，这种方式叫做构造函数注入
* Setter方法传递依赖对象
>在抽象中设置Setter方法声明依赖关系，依照依赖注入的说法，这是Setter依赖注入
* 接口声明依赖对象
>在接口的方法中声明依赖对象

## 最佳实践
依赖倒置原则的本质就是通过抽象（接口或抽象类）使各个类或模块的实现彼此独立， 不互相影响，实现模块间的松耦合，
我们怎么在项目中使用这个规则呢？只要遵循以下的几个规则就可以

* 每个类尽量都有接口或抽象类，或者抽象类和接口两者都具备
>依赖倒置的基本要求，接口和抽象类都是属于抽象的，有了抽象才可能依赖倒置

* 变量的表面类型尽量是接口或者是抽象类
>很多书上说变量的类型一定要是接口或者是抽象类，这个有点绝对化了，比如一个工具 类，xxxUtils一般是不需要接口或是抽象类的。
还有，如果你要使用类的clone方法，就必须使用实现类，这个是JDK提供的一个规范

* 任何类都不应该从具体类派生

* 尽量不要覆写基类的方法
>如果基类是一个抽象类，而且这个方法已经实现了，子类尽量不要覆写。类间依赖的是
抽象，覆写了抽象方法，对依赖的稳定性会产生一定的影响

* 结合里氏替换原则使用
>结合里里氏替换原则，父类出现的地方子类就能出现接，得出这样一个通俗的规则`接口负责定义public属性和方法，并且声明与其他对象的依赖关系，抽象类负责公共构造部分的实现，实现类准确的实现业务逻辑，同时在适当的时候对父类进行细化`
